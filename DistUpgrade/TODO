MUSTFIX:
--------
* debconf gnome dosn't work (can't connect to the session)
  [ should be fixed with the bugfix on gksu ]
* display a message that all applications should be closed for the 
  dist-upgrade (and that strange things like a crashing panel can
  happen)
  [done in current dialog]

* sources.list edit needs to add valid sources if all other sources
  are commented out
  (or for sources that can't be identified and rewrite ask the user
   what to do by just s/breezy/dapper/g?)
* inform about commented out sources
* fix "no activity for 120s warning" being repeated every sec in the logs
* use the dialog frontend (for debconf) and detect the ansi sequence that
  clear the screen and expand the terminal then 
* [fabbio]: we probably don't want to remove stuff that moved from main
  to universe (if the user has only main enabled this is considered 
  obsolete). It would also be nice inform about packages that went from
  main->universe. We could ship a list of demotions.
* [kamion]: we could use debconf-frontend=dialog and then detect the ansi
            seqence that clear the screen and open the terminal then 

breezy->dapper
--------------
- gnome-icon-theme changes a lot, icons move from hicolor to gnome.
  this might have caused a specatular crash during a upgrade


hoary->breezy
-------------
- stop gnome-volume-manager before the hoary->breezy upgrade
  (it will crash otherwise)
- send a "\n" on the libc6 question on hoary->breezy

general
-------
- CDROM upgrades !!!

- whitelist removal (pattern? e.g. c102 -> c2a etc)?

- check authentication and don't upgrade anything that is not
  authenticated (maybe just comment unauthenticated stuff out?)


Robustness:
-----------
- automatically comment out entires in the sources.list that fail to 
  fetch. 
  Trouble: apt doesn't provide a method to map from a line in th
  sources.list to the indexFile and python-apt dosn't proivde a way to
  get all the metaIndexes in sources.list, nor a way to get the
  pkgIndexFiles from the metaIndexes (metaIndex is not available in 
  python-apt at all)
  What we could do is to write DistUpgradeCache.update(), check the
  DescURI for each failed item and guess from it what sources.list
  line failed (e.g. uri.endswith("Sources{.bz2|.gz") -> deb-src, get
  base-uri, find 'dists' in uri etc)
  
- don't stop if a single pkg fails to upgrade:
  - the problem here is apt, in apt-pkg/deb/dpkgpm.cc it will stop if
    dpkg returns a non-zero exit code. The problem with this is of course
    that this may happen in the middle of the upgrade, leaving half the
    packages unpacked but not configured or loads of packages unconfigured.
    One possible solution is to not stop in apt but try to continue as long
    as possible. The problem here is that e.g. if libnoitfy0 explodes and
    evolution, update-notifer depend on it, continuing means to evo and u-n
    can't be upgraded and dpkg explodes on them too. This is not more worse
    than what we have right now I guess.
